{
    "domains": ["app.dev.insaplace.me", "www.google.com", "www.gstatic.com"],
    "https_only": true,
    "content_edits": [
        {
            "matches": ["https://www.google.com/recaptcha/api.js"],
            "substitute": [
                {
                    "pattern": "po.integrity",
                    "replacement": "let integrity"
                }
            ]
        },
        {
            "matches": ["https://www.google.com/recaptcha/api2/anchor?*"],
            "remove_headers": [
                "content-security-policy"
            ],
            "substitute": [
                {
                    "pattern": "recaptcha.anchor.Main",
                    "replacement": "console.log('init');recaptcha.anchor.Main",
                    "max_replacements": 1
                },
                {
                    "pattern": "]\");\n",
                    "replacement": "]\");\nconsole.log('init off');",
                    "max_replacements": 1
                }
            ]
        },
        {
            "matches": ["https://www.gstatic.com/recaptcha/releases/*/recaptcha__en.js"],
            "substitute": [
                {
                    "pattern": "window.location",
                    "replacement": "window.fakeLocation"
                },
                {
                    "pattern": "document.location",
                    "replacement": "window.fakeLocation"
                },
                {
                    "pattern": "self.location",
                    "replacement": "self.fakeLocation"
                },
                {
                    "pattern": "A.postMessage",
                    "replacement": "A[0].fakePostMessage"
                },
                {
                    "pattern": "r.J0.origin",
                    "replacement": "\"https://www.google.com\""
                },
                {
                    "pattern": "O.origin",
                    "replacement": "\"https://www.google.com\""
                },
                {
                    "pattern": "new Worker",
                    "replacement": "new FakeWorker"
                },
                {
                    "pattern": "new MessageChannel",
                    "replacement": "new FakeMessageChannel"
                },
                {
                    "pattern": "",
                    "replacement_file": "fake-location.js",
                    "max_replacements": 1
                }
            ]
        },
        {
            "matches": ["https://www.google.com/recaptcha/api2/webworker.js?*"],
            "substitute": [
                {
                    "pattern": "https://www.gstatic.com/",
                    "replacement": "http://localhost:8000/"
                },
                {
                    "pattern": "recaptcha__en.js",
                    "replacement": "recaptcha__en.js?mantalon-protocol=https%3A&mantalon-host=www.gstatic.com"
                }
            ]
        },
        {
            "matches": ["*"],
            "lock_browsing": true
        }
    ]
}
